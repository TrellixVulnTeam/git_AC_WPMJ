<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
  <link href="style.css" rel="stylesheet" type="text/css" />
  <title>Document</title>
</head>


<body onload="init()">

  <div class="draw-box">
    <div class="post-box" onchange="selectFile()" />
    <div id="result"></div>
    <input class="upload" id="pic" type="file" name='pic' accept="image/*" onchange="selectFile()" />
  </div>
  <canvas class="draw-box" id="can" width="1100" height="1000" style="position:relative;top:-360px;
  left: 286px;border:2px solid; z-index: 5;">
  </canvas>
  </div>
  <div style="position:absolute;top:180px;left:1400px;">Choose Color</div>
  <div style="position:absolute;top:230px;left:1450px;width:10px;height:10px;background:green;" id="green"
    onclick="color(this)"></div>
  <div style="position:absolute;top:250px;left:1450px;width:10px;height:10px;background:blue;" id="blue"
    onclick="color(this)">
  </div>
  <div style="position:absolute;top:210px;left:1450px;width:10px;height:10px;background:red;" id="red"
    onclick="color(this)">
  </div>
  <div style="position:absolute;top:230px;left:1400px;width:10px;height:10px;background:yellow;" id="yellow"
    onclick="color(this)"></div>
  <div style="position:absolute;top:210px;left:1400px;width:10px;height:10px;background:orange;" id="orange"
    onclick="color(this)"></div>
  <div style="position:absolute;top:250px;left:1400px;width:10px;height:10px;background:black;" id="black"
    onclick="color(this)"></div>
  <div style="position:absolute;top:290px;left:1400px;">Eraser</div>
  <div style="position:absolute;top:320px;left:1400px;width:15px;height:15px;background:white;border:2px solid;"
    id="white" onclick="color(this)"></div>
  <img id="canvasimg" style="position:absolute;top:320px;left:1400px;" style="display:none;">
  <input type="button" value="save" id="btn" size="30" onclick="save()"
    style="position:absolute;top:380px;left:1400px;">
  <input type="button" value="clear" id="clr" size="23" onclick="erase()"
    style="position:absolute;top:340px;left:1400px;">





  <script type="text/javascript">
    //var files = document.getElementById('pic').files;
    var form = new FormData();//通過HTML表單建立FormData物件
    // var url = '127.0.0.1:8080/'
    function selectFile() {
      var files = document.getElementById('pic').files;
      console.log(files[0]);
      if (files.length == 0) {
        return;
      }
      var file = files[0];
      //把上傳的圖片顯示出來
      var reader = new FileReader();
      // 將檔案以Data URL形式進行讀入頁面
      console.log(reader);
      reader.readAsBinaryString(file);
      reader.onload = function (f) {
        var result = document.getElementById("result");
        var src = "data:" + file.type + ";base64," + window.btoa(this.result);
        result.innerHTML = '<img src ="' + src + '"/>';
      }
      console.log('file', file);
      ///////////////////
      form.append('file', file);
      console.log(form.get('file'));
    }
        //var xhr = new XMLHttpRequest();
        // function handIn(){
        //  console.log(form.get('file'));
        //  xhr.open("post", url, true);
        //  xhr.addEventListener("readystatechange", function() {
        //      var result = xhr;
        //      if (result.status != 200) { //error
        //          console.log('上傳失敗', result.status, result.statusText, result.response);
        //      }
        //      else if (result.readyState == 4) { //finished
        //          console.log('上傳成功', result);
        //      }
        //  });
        // }
  </script>







  <script type="text/javascript" src="require.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://kit.fontawesome.com/03e658380a.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.1/dist/umd/popper.min.js"
    integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js"
    integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/"
    crossorigin="anonymous"></script>
</body>

</html>